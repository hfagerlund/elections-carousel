/*!
 * elections-carousel
 * @copyright (c) 2015 Heini Fagerlund
 * @version 0.2.1
 * @license MIT
 */!function(){"use strict";function a(a,b,c){$("#"+a).animate({left:b},c,function(){})}function b(a){var b=document.styleSheets[0],c=b.cssRules.length;jQuery(".btn--"+a).addClass("btn_disabled"),b.insertRule(".btn_disabled{animation:none!important;background-color:#cccccc!important;cursor:text!important}",c)}function c(a,b){o="btnBack"==a?p+(n+1)*j:p-(m+1)*j;var c="btnBack"==a?"back":"btnNext"==a?"next":"";o>=r&&s>=o?(jQuery(".btn--"+c).removeClass("btn_disabled"),(o===s||o===r)&&BoD.disableBtn(c),BoD.rotateCarousel("wrapper",o,k)):o>s&&"btnBack"==a?(BoD.disableBtn(c),o=s):r>o&&"btnNext"==a&&(BoD.disableBtn(c),o=r),s-1*j>=o&&"btnNext"==a&&jQuery(".btn--back").removeClass("btn_disabled"),o>=r+1*j&&"btnBack"==a&&jQuery(".btn--next").removeClass("btn_disabled"),p=o,"btnBack"==a?n=0:"btnNext"==a&&(m=0)}function d(a,b){var c=document.createElement("a");c.setAttribute("class","btn "+b),c.setAttribute("href","#"),c.innerHTML="btn--back"===b?"&lsaquo;":"&rsaquo;",l.appendChild(c),BoD.disableBtn("back"),c.addEventListener("click",function(b){var c=b.target;BoD.btnClick(a,c),b.preventDefault()},!1)}function e(a){var b=[],c=a.map(function(a){return a.votes});c.reduce(function(a,b){return a+b},0);return b.push(c.reduce(function(a,b){return a+b},0)),b.shift()}function f(a){return+(Math.round(a+"e+2")+"e-2")}function g(a){jQuery("#eResults").html("");var b=a.map(function(a){return a});b.forEach(function(a){var b="art_"+a.id,c=a.name;jQuery("#eResults").append('<article id="'+b+'" class="riding"><header><h2>Riding of: '+c+"</h2></header></article>");var d=jQuery("#"+b);d.append('<ol class="riding__list"></ol>');d.children("ol")}),jQuery(".riding").wrapAll('<div id="wrapper"></div>'),BoD.createBtn("btnBack","btn--back"),BoD.createBtn("btnNext","btn--next");var c=a.map(function(a){return a.results});jQuery(".riding").children("ol").after('<p class="riding__totalVotes">Total votes for this riding: <strong></strong> votes</p>');var d=0;c.forEach(function(a){d+=1;var b=BoD.calcTotalVotesForRiding(a);jQuery("#art_"+d).children(".riding__totalVotes").children("strong").append(b);for(var c in a){var e={name:a[c].name,partyId:a[c].partyId,votes:a[c].votes,isElected:a[c].isElected,partyCode:a[c].partyCode},f=BoD.roundToTwoDec(e.votes/b*100),g=e.isElected?" riding_winner":"",h=jQuery("#art_"+d),i=h.children("ol");i.append('<li class="riding__candidate riding__candidate_'+e.partyCode.toLowerCase()+g+'"><span class="cap">'+e.partyCode.toLowerCase()+"</span> Candidate "+e.name+" won "+e.votes+" votes ("+f+"% of the vote)</li>")}});var e=jQuery(".riding_winner");e.prepend("Elected ")}function h(){return document.getElementsByTagName&&document.getElementById&&document.getElementById("eResults")?void 0:!1}window.BoD||(window.BoD={});var i=10,j=500,k=300,l=document.getElementById("eResults"),m=0,n=0,o=0,p=0,q=i*j,r=-(q-1*j),s=0;window.BoD.rotateCarousel=a,window.BoD.disableBtn=b,window.BoD.btnClick=c,window.BoD.createBtn=d,window.BoD.calcTotalVotesForRiding=e,window.BoD.roundToTwoDec=f,window.BoD.createResultsListFunc=g,window.BoD.initializeCarousel=h}(),jQuery("html").addClass("js");var url="http://localhost:8001/results.js";jQuery.ajax({type:"GET",url:url,contentType:"application/json; charset=UTF-8",jsonpCallback:"gNews_getRidingDetailsCallback",dataType:"jsonp",success:BoD.createResultsListFunc}),document.addEventListener("DOMContentLoaded",function(){BoD.initializeCarousel()});
