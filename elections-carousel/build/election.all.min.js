/*!
 * elections-carousel
 * @copyright (c) 2015 Heini Fagerlund
 * @version 0.1.1
 * @license MIT
 */function createResultsList(a){jQuery("#eResults").html("");for(var b in a)riding=a[b].name,articleId="art_"+a[b].id,jQuery("#eResults").append('<article id="'+articleId+'" class="riding"><header><h2>Riding of: '+riding+"</h2></header></article>"),ridingCard=jQuery("#"+articleId),ridingCard.append('<ol class="riding__list"></ol>'),candidateList=ridingCard.children("ol"),results=a[b].results,candidateInfo(results)}function candidateInfo(a){var b=[],c=0;for(var d in a)candidateName=a[d].name,candidateParty=a[d].partyCode.toLowerCase(),candidateVotes=a[d].votes,winner=a[d].isElected?" riding_winner":"",b.push(candidateVotes),candidateList.append('<li class="riding__candidate riding__candidate_'+candidateParty+winner+'"><span class="cap">'+candidateParty+"</span> Candidate "+candidateName+" won "+candidateVotes+" votes</li>");c=sumPartyVotes(b),jQuery(candidateList).after('<p class="riding__totalVotes">Total votes for this riding: <strong>'+c+"</strong> votes</p>"),percentageVotesForCandidate(b)}function sumPartyVotes(a){for(var b=0,c=0;c<a.length;c++)b+=a[c]<<0;return b}function percentageVotesForCandidate(a){totalVotesForParty=sumPartyVotes(a);for(var b=0,c=0;c<a.length;c++)b=Math.round(a[c]/totalVotesForParty*100),jQuery("li:contains('"+a[c]+"')").append(" ("+b+String.fromCharCode(37)+" of the vote)");return b}function btnClick(a,b){newPosnOfWrapper="Back"==a?prevPosnOfWrapper+500*(numOfClicksBack+1):prevPosnOfWrapper-500*(numOfClicksFwd+1),newPosnOfWrapper>=-4500&&newPosnOfWrapper<=0?rotateCarousel("wrapper",newPosnOfWrapper,300):newPosnOfWrapper>0&&"Back"==a?newPosnOfWrapper=0:newPosnOfWrapper<-4500&&"Next"==a&&(newPosnOfWrapper=-4500),prevPosnOfWrapper=newPosnOfWrapper,"Back"==a?numOfClicksBack=0:"Next"==a&&(numOfClicksFwd=0)}function rotateCarousel(a,b,c){$("#"+a).animate({left:b},c,function(){})}function initializeCarousel(){if(!document.getElementsByTagName)return!1;if(!document.getElementById)return!1;if(!document.getElementById("eResults"))return!1;var a=document.getElementById("eResults");mainContents=a.innerHTML,newMainContents='<div id="wrapper">'+mainContents+"</div>",a.innerHTML=newMainContents,btnBack=document.createElement("a"),btnBack.setAttribute("class","btn btn--back"),btnBack.setAttribute("href","#"),btnBack.innerHTML="&lsaquo;",btnNext=document.createElement("a"),btnNext.setAttribute("class","btn btn--next"),btnNext.setAttribute("href","#"),btnNext.innerHTML="&rsaquo;";a.getElementsByTagName("article");a.appendChild(btnBack),a.appendChild(btnNext),numOfClicksFwd=numOfClicksBack=newPosnOfWrapper=prevPosnOfWrapper=0,btnBack.addEventListener("click",function(a){evtTarget=a.target,btnClick("Back",evtTarget),a.preventDefault()},!1),btnNext.addEventListener("click",function(a){evtTarget=a.target,btnClick("Next",evtTarget),a.preventDefault()},!1)}var url="http://path-to-json-feed-election-results.js";jQuery.ajax({type:"GET",url:url,contentType:"application/json; charset=UTF-8",jsonpCallback:"gNews_getRidingDetailsCallback",dataType:"jsonp",success:createResultsList}),jQuery(window).load(function(){initializeCarousel()});
